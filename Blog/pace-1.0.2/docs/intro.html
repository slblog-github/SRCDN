<!-- build time:Wed Aug 26 2020 09:22:44 GMT+0800 (GMT+08:00) --><h1 id="pace"><a href="#pace" class="headerlink" title="pace"></a>pace</h1><p>Include <a href="https://raw.github.com/HubSpot/pace/v0.5.3/pace.min.js" target="_blank" rel="noopener">pace.js</a> and the<br><a href="http://github.hubspot.com/pace/docs/welcome/" target="_blank" rel="noopener">theme</a> css of your choice on your page<br>(as early as is possible), and you’re done!</p><p>Pace will automatically monitor your ajax requests, event loop lag, document<br>ready state, and elements on your page to decide the progress. On ajax navigation<br>it will begin again!</p><p>If you use AMD or Browserify, require in pace.js and call <code>pace.start()</code> as early in<br>the loading process as is possible.</p><h2 id="Install-with-Eager"><a href="#Install-with-Eager" class="headerlink" title="Install with Eager"></a>Install with Eager</h2><p>The easiest way to add Pace to your site is with <a href="http://eager.io" target="_blank" rel="noopener">Eager</a>.<br>Click Install to see a live preview of Pace on your website.</p><iframe style="height:48px;width:180px" src="//install.eager.io?appId=kYKTiQjoVjQk" allowtransparency="true" scroll="no" frameborder="0"></iframe><h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><pre><code class="html"><span class="tag">&lt;<span class="name">head</span>&gt;</span>
  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/pace/pace.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"/pace/themes/pace-theme-barber-shop.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> /&gt;</span>
<span class="tag">&lt;/<span class="name">head</span>&gt;</span></code></pre><h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><p>Pace is fully automatic, no configuration is necessary to get started.</p><p>If you would like to make some tweaks, here’s how:</p><p>You can set <code>window.paceOptions</code> before bringing in the file:</p><pre><code class="javascript">paceOptions = {
  <span class="comment">// Disable the 'elements' source</span>
  elements: <span class="literal">false</span>,

  <span class="comment">// Only show the progress on regular and ajax-y page navigation,</span>
  <span class="comment">// not every request</span>
  restartOnRequestAfter: <span class="literal">false</span>
}</code></pre><p>You can also put options on the script tag:</p><pre><code class="html"><span class="tag">&lt;<span class="name">script</span> <span class="attr">data-pace-options</span>=<span class="string">'{ "ajax": false }'</span> <span class="attr">src</span>=<span class="string">'pace.js'</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></code></pre><p>If you’re using AMD or Browserify, you can pass your options to <code>start</code>:</p><pre><code class="javascript">define([<span class="string">'pace'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">pace</span>)</span>{
  pace.start({
    <span class="built_in">document</span>: <span class="literal">false</span>
  });
});</code></pre><h2 id="Themes"><a href="#Themes" class="headerlink" title="Themes"></a>Themes</h2><p>Pace includes a bunch of <a href="http://github.hubspot.com/pace/docs/welcome/" target="_blank" rel="noopener">themes</a><br>to get you started. Just include the appropriate css file. Send us a PR with<br>any interesting themes you create.</p><h2 id="Collectors"><a href="#Collectors" class="headerlink" title="Collectors"></a>Collectors</h2><p>Collectors are the bits of code which gather progress information. Pace includes four default collectors:</p><ul><li><p>Ajax</p><p>Monitors all ajax requests on the page</p></li><li><p>Elements</p><p>Checks for the existance of specific elements on the page</p></li><li><p>Document</p><p>Checks the document readyState</p></li><li><p>Event Lag</p><p>Checks for event loop lag signaling that javascript is being executed</p></li></ul><p>They can each be configured or disabled through configuration options of the same name.</p><pre><code class="javascript">paceOptions = {
  ajax: <span class="literal">false</span>, <span class="comment">// disabled</span>
  <span class="built_in">document</span>: <span class="literal">false</span>, <span class="comment">// disabled</span>
  eventLag: <span class="literal">false</span>, <span class="comment">// disabled</span>
  elements: {
    selectors: [<span class="string">'.my-page'</span>]
  }
};</code></pre><p>Add your own classes to <code>paceOptions.extraSources</code> to add more sources. Each source should either<br>have a <code>.progress</code> property, or a <code>.elements</code> property which is a list of objects with<br><code>.progress</code> properties. Pace will automatically handle all scaling to make the progress<br>changes look smooth to the user.</p><h2 id="Elements"><a href="#Elements" class="headerlink" title="Elements"></a>Elements</h2><p>Elements being rendered to the screen is one way for us to decide that the page has been<br>rendered. If you would like to use that source of information (not required at all),<br>specify one or more selectors. You can comma seperate the selectors to propertly handle<br>error states, where the progress bar should disappear, but the element we are looking for<br>may never appear:</p><pre><code class="javascript">paceOptions = {
  elements: {
    selectors: [<span class="string">'.timeline,.timeline-error'</span>, <span class="string">'.user-profile,.profile-error'</span>]
  }
}</code></pre><p>Pace will consider the elements test successful when each selector matches something. For<br>this example, when either <code>.timeline</code> or <code>.timeline-error</code> exist, and either <code>.user-profile</code><br>or <code>.profile-error</code> exist.</p><h2 id="Restart-Rules"><a href="#Restart-Rules" class="headerlink" title="Restart Rules"></a>Restart Rules</h2><p>Most users want the progress bar to automatically restart when a pushState event occurs<br>(generally means ajax navigation is occuring). You can disable this:</p><pre><code class="javascript">paceOptions = {
  restartOnPushState: <span class="literal">false</span>
}</code></pre><p>You can also have pace restart on every ajax request which lasts longer than x ms. You’ll want to<br>disable this if you make ajax requests the user doesn’t need to know about, like precaching:</p><pre><code class="javascript">paceOptions = {
  restartOnRequestAfter: <span class="literal">false</span>
}</code></pre><p>You can always trigger a restart manually by calling <code>Pace.restart()</code></p><p>See <a href="https://github.com/HubSpot/pace/blob/master/pace.coffee" target="_blank" rel="noopener">the source</a> for a full list of all options.</p><h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><p>Pace exposes the following methods:</p><ul><li><p><code>Pace.start</code>: Show the progress bar and start updating. Called automatically if you don’t use AMD or CommonJS.</p></li><li><p><code>Pace.restart</code>: Show the progress bar if it’s hidden and start reporting the progress from scratch. Called automatically<br>whenever <code>pushState</code> or <code>replaceState</code> is called by default.</p></li><li><p><code>Pace.stop</code>: Hide the progress bar and stop updating it.</p></li><li><p><code>Pace.track</code>: Explicitly track one or more requests, see Tracking below</p></li><li><p><code>Pace.ignore</code>: Expliticly ignore one or more requests, see Tracking below</p></li></ul><h2 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h2><p>Pace fires the following events:</p><ul><li><code>start</code>: When pace is initially started, or as a part of a restart</li><li><code>stop</code>: When pace is manually stopped, or as a part of a restart</li><li><code>restart</code>: When pace is restarted (manually, or by a new AJAX request)</li><li><code>done</code>: When pace is finished</li><li><code>hide</code>: When the pace is hidden (can be later than <code>done</code>, based on <code>ghostTime</code> and <code>minTime</code>)</li></ul><p>You can bind onto events using the <code>on</code>, <code>off</code> and <code>once</code> methods:</p><ul><li><code>Pace.on(event, handler, [context])</code>: Call <code>handler</code> (optionally with context) when <code>event</code> is triggered</li><li><code>Pace.off(event, [handler])</code>: Unbind the provided <code>event</code> and <code>handler</code> combination.</li><li><code>Pace.once(event, handler, [context])</code>: Bind <code>handler</code> to the next (and only the next) incidence of <code>event</code></li></ul><h2 id="Tracking"><a href="#Tracking" class="headerlink" title="Tracking"></a>Tracking</h2><p>By default, Pace will show any ajax requests which begin as a part of a normal or ajax-y page load, or which last longer than<br>500ms.</p><p>You can disable all ajax tracking by setting <code>ajax</code> to false:</p><pre><code class="javascript">Pace.options = {
  ajax: <span class="literal">false</span>
}</code></pre><p>You can disable ajax tracking except on page navigation by setting <code>restartOnRequestAfter</code> to false:</p><pre><code class="javascript">Pace.options = {
  restartOnRequestAfter: <span class="literal">false</span>
}</code></pre><p>You can manually disable tracking for a specific request or requests by triggering them within a <code>Pace.ignore</code> callback:</p><pre><code class="javascript">Pace.ignore(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{
  $.ajax(...)
});</code></pre><p>You can force the progress bar to be shown for a specific request by triggering them within a <code>Pace.track</code> callback:</p><pre><code class="javascript">Pace.track(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{
  $.ajax(...)
});</code></pre><p>You can also ignore URLs based on a pattern:</p><pre><code class="javascript">Pace.options = {
  ajax: {
    ignoreURLs: [<span class="string">'some-substring'</span>, /some-regexp/]
  }
}</code></pre><h2 id="Dependencies"><a href="#Dependencies" class="headerlink" title="Dependencies"></a>Dependencies</h2><p>None!</p><h2 id="Support"><a href="#Support" class="headerlink" title="Support"></a>Support</h2><p>Pace is designed to support IE8+ (standards mode), FF 3.5+, Chrome, Safari 4+, Opera 10.5+, and all modern<br>mobile browsers. If you run into a compatibility issue, or can make a case for supporting something else,<br>please create an issue.</p><h2 id="Size"><a href="#Size" class="headerlink" title="Size"></a>Size</h2><p>pace.js is 4kb minified and gzipped. The themes vary between 0.5 and 4kb.</p><h2 id="Issues"><a href="#Issues" class="headerlink" title="Issues"></a>Issues</h2><p>We have obviously not tested this on every website. If you run into an issue, or find a way the automatic<br>detection could be better, please <a href="https://github.com/HubSpot/pace/issues/new" target="_blank" rel="noopener">create an Issue</a>. If you can include a test case, that’s even better.</p><h2 id="Contributing"><a href="#Contributing" class="headerlink" title="Contributing"></a>Contributing</h2><p>PRs Welcome!</p><p>Building requires node.js.</p><pre><code class="bash">npm install
grunt</code></pre><p>You can also run <code>grunt watch</code> to have it automatically build as you make changes.</p><p>There is no need to include compiled files in PRs.</p><h2 id="Credits"><a href="#Credits" class="headerlink" title="Credits"></a>Credits</h2><p><a href="http://dev.hubspot.com" target="_blank" rel="noopener">HubSpot</a></p><p>Javascript by <a href="http://twitter.com/zackbloom" target="_blank" rel="noopener">Zack Bloom</a><br>CSS by <a href="http://twitter.com/adamfschwartz" target="_blank" rel="noopener">Adam Schwartz</a></p><p>Themes inspired by <a href="http://tympanus.net/codrops/2013/09/18/creative-loading-effects/" target="_blank" rel="noopener">Mary Lou</a></p><p>Project inspired by <a href="http://ricostacruz.com/nprogress/" target="_blank" rel="noopener">nprogress</a></p><!-- rebuild by neat -->